"use strict";var variables=JSON.parse(process.env.VCAP_SERVICES||"{}"),db_1=process.env.DB_1,db_2=process.env.DB_2,mongoose=require("mongoose"),opts={useNewUrlParser:!0,useUnifiedTopology:!0},issue_tracker_conn=mongoose.createConnection(db_1,opts,function(o,n){o?console.log("Fail to connect to "+db_1):(console.log("Successfully connected to "+db_1),issue_tracker_conn.on("disconnected",function(){console.log("Lost connection to Issue Tracker DB"),reconnect(issue_tracker_conn,db_1,opts)}))}),sites_conn=mongoose.createConnection(db_2,opts,function(o,n){o?console.log("Fail to connect to "+db_2):(console.log("Successfully connected to "+db_2),sites_conn.on("disconnected",function(){console.log("Lost connection to Stations Info DB"),reconnect(sites_conn,db_2,opts)}))}),fault_inbox_db="% DB string goes here %",fault_inbox_conn={};function reconnect(n,e,t){var c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;if(10<c)return console.log("Failed to reconnect to "+e+" after 10 attempts"),void setTimeout(function(){process.exit(1)},24e4);console.log("Attempting to reconnect to "+e+", attempt #"+c),setTimeout(function(){mongoose.createConnection(e,t,function(o){o?(console.log("Reconnect attempt #"+c+" to "+e+" failed"),reconnect(n,e,t,c+1)):console.log("Reconnected to "+e+" successfully")})},1e4)}module.exports={issue_tracker_conn:issue_tracker_conn,sites_conn:sites_conn,fault_inbox_conn:fault_inbox_conn};
//# sourceMappingURL=connections.min.js.map
