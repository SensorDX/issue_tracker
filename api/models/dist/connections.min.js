"use strict";var variables=JSON.parse(process.env.VCAP_SERVICES||"{}"),db_1=process.env.DB_1,db_2=process.env.DB_2;console.log("variables",variables);var mongoose=require("mongoose"),opts={useNewUrlParser:!0,useUnifiedTopology:!0},_require=require("util"),promisify=_require.promisify,setTimeoutPromise=promisify(setTimeout);function connectToDatabase(o){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(mongoose.connect(o,{useNewUrlParser:!0,useUnifiedTopology:!0}));case 3:console.log("Successfully connected to "+o),mongoose.connection.on("disconnected",function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Lost connection to MongoDB"),e.prev=1,e.next=4,regeneratorRuntime.awrap(setTimeoutPromise(6e4));case 4:return e.next=6,regeneratorRuntime.awrap(mongoose.connect(o,{useNewUrlParser:!0,useUnifiedTopology:!0}));case 6:console.log("Successfully reconnected to "+o),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error reconnecting to "+o+":",e.t0.message),process.exit(1);case 13:case"end":return e.stop()}},null,null,[[1,9]])}),mongoose.connection.on("reconnected",function(){console.log("Successfully reconnected to MongoDB")}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error connecting to "+o+":",e.t0.message),process.exit(1);case 12:case"end":return e.stop()}},null,null,[[0,8]])}connectToDatabase(db_1),connectToDatabase(db_2);var fault_inbox_db="% DB string goes here %",fault_inbox_conn={};module.exports={issue_tracker_conn:issue_tracker_conn,sites_conn:sites_conn,fault_inbox_conn:fault_inbox_conn};
//# sourceMappingURL=connections.min.js.map
